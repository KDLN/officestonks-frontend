{"ast":null,"code":"import React,{useState,useEffect}from'react';import Navigation from'../components/Navigation';import{getLeaderboard}from'../services/user';import{getUserId}from'../services/auth';import'./Leaderboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Leaderboard=()=>{const[leaderboard,setLeaderboard]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const currentUserId=parseInt(getUserId());const fetchLeaderboard=async()=>{try{setLoading(true);setError(null);const data=await getLeaderboard(20);// Get top 20 users\nsetLeaderboard(data);setLoading(false);}catch(err){setError('Failed to load leaderboard data. Please try again later.');setLoading(false);}};useEffect(()=>{fetchLeaderboard();},[]);const formatCurrency=value=>{return`$${value.toFixed(2).replace(/\\d(?=(\\d{3})+\\.)/g,'$&,')}`;};const handleRefresh=()=>{fetchLeaderboard();};return/*#__PURE__*/_jsxs(\"div\",{className:\"leaderboard-page\",children:[/*#__PURE__*/_jsx(Navigation,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"leaderboard-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"leaderboard-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Investor Leaderboard\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"refresh-button\",onClick:handleRefresh,disabled:loading,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Refresh\"}),/*#__PURE__*/_jsx(\"svg\",{className:\"refresh-icon\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"})})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading leaderboard data...\"}):error?/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}):leaderboard.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"No leaderboard data available.\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"leaderboard-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Rank\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Investor\"}),/*#__PURE__*/_jsx(\"th\",{className:\"value\",children:\"Cash Balance\"}),/*#__PURE__*/_jsx(\"th\",{className:\"value\",children:\"Stock Value\"}),/*#__PURE__*/_jsx(\"th\",{className:\"value\",children:\"Total Value\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:leaderboard.map(entry=>/*#__PURE__*/_jsxs(\"tr\",{className:entry.user_id===currentUserId?'current-user':'',children:[/*#__PURE__*/_jsx(\"td\",{className:`rank rank-${entry.rank<=3?entry.rank:''}`,children:entry.rank}),/*#__PURE__*/_jsxs(\"td\",{className:\"username\",children:[entry.username,entry.user_id===currentUserId?' (You)':'']}),/*#__PURE__*/_jsx(\"td\",{className:\"value\",children:formatCurrency(entry.cash_balance)}),/*#__PURE__*/_jsx(\"td\",{className:\"value\",children:formatCurrency(entry.stock_value)}),/*#__PURE__*/_jsx(\"td\",{className:\"value\",children:formatCurrency(entry.total_value)})]},entry.user_id))})]})]})]});};export default Leaderboard;","map":{"version":3,"names":["React","useState","useEffect","Navigation","getLeaderboard","getUserId","jsx","_jsx","jsxs","_jsxs","Leaderboard","leaderboard","setLeaderboard","loading","setLoading","error","setError","currentUserId","parseInt","fetchLeaderboard","data","err","formatCurrency","value","toFixed","replace","handleRefresh","className","children","onClick","disabled","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","length","map","entry","user_id","rank","username","cash_balance","stock_value","total_value"],"sources":["/home/kdln/code/officestonks/frontend/src/pages/Leaderboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Navigation from '../components/Navigation';\nimport { getLeaderboard } from '../services/user';\nimport { getUserId } from '../services/auth';\nimport './Leaderboard.css';\n\nconst Leaderboard = () => {\n  const [leaderboard, setLeaderboard] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const currentUserId = parseInt(getUserId());\n\n  const fetchLeaderboard = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await getLeaderboard(20); // Get top 20 users\n      setLeaderboard(data);\n      setLoading(false);\n    } catch (err) {\n      setError('Failed to load leaderboard data. Please try again later.');\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchLeaderboard();\n  }, []);\n\n  const formatCurrency = (value) => {\n    return `$${value.toFixed(2).replace(/\\d(?=(\\d{3})+\\.)/g, '$&,')}`;\n  };\n\n  const handleRefresh = () => {\n    fetchLeaderboard();\n  };\n\n  return (\n    <div className=\"leaderboard-page\">\n      <Navigation />\n      <div className=\"leaderboard-container\">\n        <div className=\"leaderboard-header\">\n          <h1>Investor Leaderboard</h1>\n          <button className=\"refresh-button\" onClick={handleRefresh} disabled={loading}>\n            <span>Refresh</span>\n            <svg className=\"refresh-icon\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n            </svg>\n          </button>\n        </div>\n        \n        {loading ? (\n          <div className=\"loading\">Loading leaderboard data...</div>\n        ) : error ? (\n          <div className=\"error\">{error}</div>\n        ) : leaderboard.length === 0 ? (\n          <div className=\"no-data\">No leaderboard data available.</div>\n        ) : (\n          <table className=\"leaderboard-table\">\n            <thead>\n              <tr>\n                <th>Rank</th>\n                <th>Investor</th>\n                <th className=\"value\">Cash Balance</th>\n                <th className=\"value\">Stock Value</th>\n                <th className=\"value\">Total Value</th>\n              </tr>\n            </thead>\n            <tbody>\n              {leaderboard.map(entry => (\n                <tr \n                  key={entry.user_id}\n                  className={entry.user_id === currentUserId ? 'current-user' : ''}\n                >\n                  <td className={`rank rank-${entry.rank <= 3 ? entry.rank : ''}`}>\n                    {entry.rank}\n                  </td>\n                  <td className=\"username\">\n                    {entry.username}\n                    {entry.user_id === currentUserId ? ' (You)' : ''}\n                  </td>\n                  <td className=\"value\">{formatCurrency(entry.cash_balance)}</td>\n                  <td className=\"value\">{formatCurrency(entry.stock_value)}</td>\n                  <td className=\"value\">{formatCurrency(entry.total_value)}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Leaderboard;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,OAASC,cAAc,KAAQ,kBAAkB,CACjD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3B,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAAgB,aAAa,CAAGC,QAAQ,CAACb,SAAS,CAAC,CAAC,CAAC,CAE3C,KAAM,CAAAc,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CACFL,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CACd,KAAM,CAAAI,IAAI,CAAG,KAAM,CAAAhB,cAAc,CAAC,EAAE,CAAC,CAAE;AACvCQ,cAAc,CAACQ,IAAI,CAAC,CACpBN,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAOO,GAAG,CAAE,CACZL,QAAQ,CAAC,0DAA0D,CAAC,CACpEF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDZ,SAAS,CAAC,IAAM,CACdiB,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,cAAc,CAAIC,KAAK,EAAK,CAChC,MAAO,IAAIA,KAAK,CAACC,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,mBAAmB,CAAE,KAAK,CAAC,EAAE,CACnE,CAAC,CAED,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1BP,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAED,mBACEV,KAAA,QAAKkB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BrB,IAAA,CAACJ,UAAU,GAAE,CAAC,cACdM,KAAA,QAAKkB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCnB,KAAA,QAAKkB,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCrB,IAAA,OAAAqB,QAAA,CAAI,sBAAoB,CAAI,CAAC,cAC7BnB,KAAA,WAAQkB,SAAS,CAAC,gBAAgB,CAACE,OAAO,CAAEH,aAAc,CAACI,QAAQ,CAAEjB,OAAQ,CAAAe,QAAA,eAC3ErB,IAAA,SAAAqB,QAAA,CAAM,SAAO,CAAM,CAAC,cACpBrB,IAAA,QAAKoB,SAAS,CAAC,cAAc,CAACI,KAAK,CAAC,4BAA4B,CAACC,IAAI,CAAC,MAAM,CAACC,OAAO,CAAC,WAAW,CAACC,MAAM,CAAC,cAAc,CAAAN,QAAA,cACpHrB,IAAA,SAAM4B,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACC,CAAC,CAAC,6GAA6G,CAAE,CAAC,CAClL,CAAC,EACA,CAAC,EACN,CAAC,CAELzB,OAAO,cACNN,IAAA,QAAKoB,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,6BAA2B,CAAK,CAAC,CACxDb,KAAK,cACPR,IAAA,QAAKoB,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAEb,KAAK,CAAM,CAAC,CAClCJ,WAAW,CAAC4B,MAAM,GAAK,CAAC,cAC1BhC,IAAA,QAAKoB,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,gCAA8B,CAAK,CAAC,cAE7DnB,KAAA,UAAOkB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAClCrB,IAAA,UAAAqB,QAAA,cACEnB,KAAA,OAAAmB,QAAA,eACErB,IAAA,OAAAqB,QAAA,CAAI,MAAI,CAAI,CAAC,cACbrB,IAAA,OAAAqB,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBrB,IAAA,OAAIoB,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cACvCrB,IAAA,OAAIoB,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,aAAW,CAAI,CAAC,cACtCrB,IAAA,OAAIoB,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,aAAW,CAAI,CAAC,EACpC,CAAC,CACA,CAAC,cACRrB,IAAA,UAAAqB,QAAA,CACGjB,WAAW,CAAC6B,GAAG,CAACC,KAAK,eACpBhC,KAAA,OAEEkB,SAAS,CAAEc,KAAK,CAACC,OAAO,GAAKzB,aAAa,CAAG,cAAc,CAAG,EAAG,CAAAW,QAAA,eAEjErB,IAAA,OAAIoB,SAAS,CAAE,aAAac,KAAK,CAACE,IAAI,EAAI,CAAC,CAAGF,KAAK,CAACE,IAAI,CAAG,EAAE,EAAG,CAAAf,QAAA,CAC7Da,KAAK,CAACE,IAAI,CACT,CAAC,cACLlC,KAAA,OAAIkB,SAAS,CAAC,UAAU,CAAAC,QAAA,EACrBa,KAAK,CAACG,QAAQ,CACdH,KAAK,CAACC,OAAO,GAAKzB,aAAa,CAAG,QAAQ,CAAG,EAAE,EAC9C,CAAC,cACLV,IAAA,OAAIoB,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAEN,cAAc,CAACmB,KAAK,CAACI,YAAY,CAAC,CAAK,CAAC,cAC/DtC,IAAA,OAAIoB,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAEN,cAAc,CAACmB,KAAK,CAACK,WAAW,CAAC,CAAK,CAAC,cAC9DvC,IAAA,OAAIoB,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAEN,cAAc,CAACmB,KAAK,CAACM,WAAW,CAAC,CAAK,CAAC,GAZzDN,KAAK,CAACC,OAaT,CACL,CAAC,CACG,CAAC,EACH,CACR,EACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAhC,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}