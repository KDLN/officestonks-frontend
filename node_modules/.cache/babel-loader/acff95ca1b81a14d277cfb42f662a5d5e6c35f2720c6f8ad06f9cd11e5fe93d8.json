{"ast":null,"code":"// Authentication service for the frontend\n// API URL\n// Make sure to include the correct API path\nconst BASE_URL=process.env.REACT_APP_API_URL||'https://web-copy-production-5b48.up.railway.app';const API_URL=`${BASE_URL}/api`;console.log(\"Using API URL:\",API_URL);// Register a new user\nexport const register=async(username,password)=>{try{const response=await fetch(`${API_URL}/auth/register`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.error||'Registration failed');}const data=await response.json();// Store token in localStorage\nlocalStorage.setItem('token',data.token);localStorage.setItem('userId',data.user_id);return data;}catch(error){throw error;}};// Login an existing user\nexport const login=async(username,password)=>{try{const response=await fetch(`${API_URL}/auth/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.error||'Login failed');}const data=await response.json();// Store token in localStorage\nlocalStorage.setItem('token',data.token);localStorage.setItem('userId',data.user_id);return data;}catch(error){throw error;}};// Logout\nexport const logout=()=>{localStorage.removeItem('token');localStorage.removeItem('userId');window.location.href='/login';};// Check if user is authenticated\nexport const isAuthenticated=()=>{return!!localStorage.getItem('token');};// Get authentication token\nexport const getToken=()=>{return localStorage.getItem('token');};// Get user ID\nexport const getUserId=()=>{return localStorage.getItem('userId');};","map":{"version":3,"names":["BASE_URL","process","env","REACT_APP_API_URL","API_URL","console","log","register","username","password","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","catch","Error","error","data","localStorage","setItem","token","user_id","login","logout","removeItem","window","location","href","isAuthenticated","getItem","getToken","getUserId"],"sources":["/home/kdln/code/officestonks/frontend/src/services/auth.js"],"sourcesContent":["// Authentication service for the frontend\n\n// API URL\n// Make sure to include the correct API path\nconst BASE_URL = process.env.REACT_APP_API_URL || 'https://web-copy-production-5b48.up.railway.app';\nconst API_URL = `${BASE_URL}/api`;\nconsole.log(\"Using API URL:\", API_URL);\n\n// Register a new user\nexport const register = async (username, password) => {\n  try {\n    const response = await fetch(`${API_URL}/auth/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ username, password }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.error || 'Registration failed');\n    }\n\n    const data = await response.json();\n    \n    // Store token in localStorage\n    localStorage.setItem('token', data.token);\n    localStorage.setItem('userId', data.user_id);\n    \n    return data;\n  } catch (error) {\n    throw error;\n  }\n};\n\n// Login an existing user\nexport const login = async (username, password) => {\n  try {\n    const response = await fetch(`${API_URL}/auth/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ username, password }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.error || 'Login failed');\n    }\n\n    const data = await response.json();\n    \n    // Store token in localStorage\n    localStorage.setItem('token', data.token);\n    localStorage.setItem('userId', data.user_id);\n    \n    return data;\n  } catch (error) {\n    throw error;\n  }\n};\n\n// Logout\nexport const logout = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('userId');\n  window.location.href = '/login';\n};\n\n// Check if user is authenticated\nexport const isAuthenticated = () => {\n  return !!localStorage.getItem('token');\n};\n\n// Get authentication token\nexport const getToken = () => {\n  return localStorage.getItem('token');\n};\n\n// Get user ID\nexport const getUserId = () => {\n  return localStorage.getItem('userId');\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}