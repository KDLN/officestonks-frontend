{"ast":null,"code":"// Authentication service for the frontend\n\n// API URL\nconst API_URL = process.env.REACT_APP_API_URL || 'https://web-production-1e26.up.railway.app/api';\n\n// Register a new user\nexport const register = async (username, password) => {\n  try {\n    const response = await fetch(`${API_URL}/auth/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username,\n        password\n      })\n    });\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.error || 'Registration failed');\n    }\n    const data = await response.json();\n\n    // Store token in localStorage\n    localStorage.setItem('token', data.token);\n    localStorage.setItem('userId', data.user_id);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n};\n\n// Login an existing user\nexport const login = async (username, password) => {\n  try {\n    const response = await fetch(`${API_URL}/auth/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username,\n        password\n      })\n    });\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.error || 'Login failed');\n    }\n    const data = await response.json();\n\n    // Store token in localStorage\n    localStorage.setItem('token', data.token);\n    localStorage.setItem('userId', data.user_id);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n};\n\n// Logout\nexport const logout = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('userId');\n  window.location.href = '/login';\n};\n\n// Check if user is authenticated\nexport const isAuthenticated = () => {\n  return !!localStorage.getItem('token');\n};\n\n// Get authentication token\nexport const getToken = () => {\n  return localStorage.getItem('token');\n};\n\n// Get user ID\nexport const getUserId = () => {\n  return localStorage.getItem('userId');\n};","map":{"version":3,"names":["API_URL","process","env","REACT_APP_API_URL","register","username","password","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","catch","Error","error","data","localStorage","setItem","token","user_id","login","logout","removeItem","window","location","href","isAuthenticated","getItem","getToken","getUserId"],"sources":["/home/kdln/code/officestonks/frontend/src/services/auth.js"],"sourcesContent":["// Authentication service for the frontend\n\n// API URL\nconst API_URL = process.env.REACT_APP_API_URL || 'https://web-production-1e26.up.railway.app/api';\n\n// Register a new user\nexport const register = async (username, password) => {\n  try {\n    const response = await fetch(`${API_URL}/auth/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ username, password }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.error || 'Registration failed');\n    }\n\n    const data = await response.json();\n    \n    // Store token in localStorage\n    localStorage.setItem('token', data.token);\n    localStorage.setItem('userId', data.user_id);\n    \n    return data;\n  } catch (error) {\n    throw error;\n  }\n};\n\n// Login an existing user\nexport const login = async (username, password) => {\n  try {\n    const response = await fetch(`${API_URL}/auth/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ username, password }),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.error || 'Login failed');\n    }\n\n    const data = await response.json();\n    \n    // Store token in localStorage\n    localStorage.setItem('token', data.token);\n    localStorage.setItem('userId', data.user_id);\n    \n    return data;\n  } catch (error) {\n    throw error;\n  }\n};\n\n// Logout\nexport const logout = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('userId');\n  window.location.href = '/login';\n};\n\n// Check if user is authenticated\nexport const isAuthenticated = () => {\n  return !!localStorage.getItem('token');\n};\n\n// Get authentication token\nexport const getToken = () => {\n  return localStorage.getItem('token');\n};\n\n// Get user ID\nexport const getUserId = () => {\n  return localStorage.getItem('userId');\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}