{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{getUserPortfolio,getTransactionHistory,getAllStocks}from'../services/stock';import{initWebSocket,addListener,closeWebSocket}from'../services/websocket';import Navigation from'../components/Navigation';import Chat from'../components/Chat';import'./Dashboard.css';// Default empty states to prevent null references\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DEFAULT_PORTFOLIO={portfolio_items:[],cash_balance:0,stock_value:0,total_value:0};const Dashboard=()=>{var _portfolio$portfolio_;const[portfolio,setPortfolio]=useState(DEFAULT_PORTFOLIO);const[transactions,setTransactions]=useState([]);const[topStocks,setTopStocks]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchData=async()=>{try{// Fetch portfolio, transactions, and stocks data in parallel\nconst[portfolioData,transactionsData,stocksData]=await Promise.all([getUserPortfolio(),getTransactionHistory(5),// Get 5 most recent transactions\ngetAllStocks()]);setPortfolio(portfolioData);setTransactions(transactionsData);// Get top 5 stocks by price\nconst sortedStocks=[...stocksData].sort((a,b)=>b.current_price-a.current_price);setTopStocks(sortedStocks.slice(0,5));setLoading(false);}catch(err){setError('Failed to load dashboard data. Please try again later.');setLoading(false);}};fetchData();// Initialize WebSocket connection\ninitWebSocket();// Listen for stock updates to refresh data\nconst removeListener=addListener('*',message=>{// Log the message for debugging\nconsole.log('Received message on dashboard:',message);// Process stock update message\nif(message.type==='stock_update'||message.id&&message.current_price){// Extract stock_id and price - handle different message formats\nconst stock_id=message.stock_id||message.id;const price=message.price||message.current_price;if(!stock_id||!price){console.log('Missing required fields in message:',message);return;}// Update portfolio stocks if affected\nsetPortfolio(prevPortfolio=>{// If portfolio is null or undefined, use the default empty portfolio\nconst portfolio=prevPortfolio||DEFAULT_PORTFOLIO;if(!portfolio.portfolio_items){return portfolio;}// Update portfolio items if the stock is in portfolio\nconst updatedItems=portfolio.portfolio_items.map(item=>{if(!item||!item.stock)return item;if(item.stock_id===stock_id){const oldValue=item.quantity*(item.stock.current_price||0);const newValue=item.quantity*price;const updatedStock={...item.stock,current_price:price};return{...item,stock:updatedStock,valueChange:oldValue<newValue?'up':'down'};}return item;});// Recalculate stock value with null safety\nconst newStockValue=updatedItems.reduce((total,item)=>{if(!item||!item.stock)return total;return total+item.quantity*(item.stock.current_price||0);},0);return{...portfolio,portfolio_items:updatedItems,stock_value:newStockValue,total_value:(portfolio.cash_balance||0)+newStockValue};});// Update top stocks if affected\nsetTopStocks(prevTopStocks=>{if(!prevTopStocks||!Array.isArray(prevTopStocks)){return prevTopStocks||[];}return prevTopStocks.map(stock=>{if(!stock)return stock;if(stock.id===stock_id){return{...stock,current_price:price,priceChange:(stock.current_price||0)<price?'up':'down'};}return stock;});});}});// Clean up on unmount\nreturn()=>{removeListener();closeWebSocket();};},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading dashboard...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-page\",children:[/*#__PURE__*/_jsx(Navigation,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"portfolio-value\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Total Portfolio Value\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"value\",children:[\"$\",((portfolio===null||portfolio===void 0?void 0:portfolio.total_value)||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"portfolio-breakdown\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"breakdown-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Cash:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",((portfolio===null||portfolio===void 0?void 0:portfolio.cash_balance)||0).toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"breakdown-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Stocks:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",((portfolio===null||portfolio===void 0?void 0:portfolio.stock_value)||0).toFixed(2)]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Portfolio\"}),/*#__PURE__*/_jsx(Link,{to:\"/portfolio\",className:\"view-all\",children:\"View All\"})]}),portfolio!==null&&portfolio!==void 0&&portfolio.portfolio_items&&portfolio.portfolio_items.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"portfolio-list\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"dashboard-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Symbol\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Shares\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Value\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(_portfolio$portfolio_=portfolio.portfolio_items)===null||_portfolio$portfolio_===void 0?void 0:_portfolio$portfolio_.slice(0,3).map(item=>item&&item.stock?/*#__PURE__*/_jsxs(\"tr\",{className:item.valueChange?`value-${item.valueChange}`:'',children:[/*#__PURE__*/_jsx(\"td\",{children:item.stock.symbol}),/*#__PURE__*/_jsx(\"td\",{children:item.quantity}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",(item.stock.current_price||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",(item.quantity*(item.stock.current_price||0)).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:`/stock/${item.stock_id}`,className:\"trade-button\",children:\"Trade\"})})]},item.stock_id):null)})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"empty-list\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"You don't own any stocks yet.\"}),/*#__PURE__*/_jsx(Link,{to:\"/stocks\",className:\"action-button\",children:\"Start Trading\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Top Stocks\"}),/*#__PURE__*/_jsx(Link,{to:\"/stocks\",className:\"view-all\",children:\"View All\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"top-stocks-list\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"dashboard-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Symbol\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:topStocks&&topStocks.length>0?topStocks.map(stock=>stock?/*#__PURE__*/_jsxs(\"tr\",{className:stock.priceChange?`price-${stock.priceChange}`:'',children:[/*#__PURE__*/_jsx(\"td\",{children:stock.symbol}),/*#__PURE__*/_jsx(\"td\",{children:stock.name}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",(stock.current_price||0).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:`/stock/${stock.id}`,className:\"trade-button\",children:\"Trade\"})})]},stock.id):null):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",className:\"empty-message\",children:\"No stocks available\"})})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Recent Transactions\"}),/*#__PURE__*/_jsx(Link,{to:\"/transactions\",className:\"view-all\",children:\"View All\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"transactions-list\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"dashboard-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Stock\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:transactions&&transactions.length>0?transactions.map(transaction=>transaction&&transaction.stock?/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:new Date(transaction.created_at).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:transaction.stock.symbol}),/*#__PURE__*/_jsx(\"td\",{className:`transaction-type ${transaction.transaction_type}`,children:transaction.transaction_type}),/*#__PURE__*/_jsx(\"td\",{children:transaction.quantity}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",(transaction.price||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",(transaction.quantity*(transaction.price||0)).toFixed(2)]})]},transaction.id):null):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",className:\"empty-message\",children:\"No recent transactions.\"})})})]})})]})]})]}),/*#__PURE__*/_jsx(Chat,{})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Link","getUserPortfolio","getTransactionHistory","getAllStocks","initWebSocket","addListener","closeWebSocket","Navigation","Chat","jsx","_jsx","jsxs","_jsxs","DEFAULT_PORTFOLIO","portfolio_items","cash_balance","stock_value","total_value","Dashboard","_portfolio$portfolio_","portfolio","setPortfolio","transactions","setTransactions","topStocks","setTopStocks","loading","setLoading","error","setError","fetchData","portfolioData","transactionsData","stocksData","Promise","all","sortedStocks","sort","a","b","current_price","slice","err","removeListener","message","console","log","type","id","stock_id","price","prevPortfolio","updatedItems","map","item","stock","oldValue","quantity","newValue","updatedStock","valueChange","newStockValue","reduce","total","prevTopStocks","Array","isArray","priceChange","className","children","toFixed","to","length","symbol","name","colSpan","transaction","Date","created_at","toLocaleDateString","transaction_type"],"sources":["/home/kdln/code/officestonks/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { getUserPortfolio, getTransactionHistory, getAllStocks } from '../services/stock';\nimport { initWebSocket, addListener, closeWebSocket } from '../services/websocket';\nimport Navigation from '../components/Navigation';\nimport Chat from '../components/Chat';\nimport './Dashboard.css';\n\n// Default empty states to prevent null references\nconst DEFAULT_PORTFOLIO = {\n  portfolio_items: [],\n  cash_balance: 0,\n  stock_value: 0,\n  total_value: 0\n};\n\nconst Dashboard = () => {\n  const [portfolio, setPortfolio] = useState(DEFAULT_PORTFOLIO);\n  const [transactions, setTransactions] = useState([]);\n  const [topStocks, setTopStocks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // Fetch portfolio, transactions, and stocks data in parallel\n        const [portfolioData, transactionsData, stocksData] = await Promise.all([\n          getUserPortfolio(),\n          getTransactionHistory(5), // Get 5 most recent transactions\n          getAllStocks()\n        ]);\n        \n        setPortfolio(portfolioData);\n        setTransactions(transactionsData);\n        \n        // Get top 5 stocks by price\n        const sortedStocks = [...stocksData].sort((a, b) => b.current_price - a.current_price);\n        setTopStocks(sortedStocks.slice(0, 5));\n        \n        setLoading(false);\n      } catch (err) {\n        setError('Failed to load dashboard data. Please try again later.');\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n\n    // Initialize WebSocket connection\n    initWebSocket();\n\n    // Listen for stock updates to refresh data\n    const removeListener = addListener('*', (message) => {\n      // Log the message for debugging\n      console.log('Received message on dashboard:', message);\n\n      // Process stock update message\n      if (message.type === 'stock_update' || (message.id && message.current_price)) {\n        // Extract stock_id and price - handle different message formats\n        const stock_id = message.stock_id || message.id;\n        const price = message.price || message.current_price;\n\n        if (!stock_id || !price) {\n          console.log('Missing required fields in message:', message);\n          return;\n        }\n\n        // Update portfolio stocks if affected\n        setPortfolio(prevPortfolio => {\n          // If portfolio is null or undefined, use the default empty portfolio\n          const portfolio = prevPortfolio || DEFAULT_PORTFOLIO;\n          if (!portfolio.portfolio_items) {\n            return portfolio;\n          }\n\n          // Update portfolio items if the stock is in portfolio\n          const updatedItems = portfolio.portfolio_items.map(item => {\n            if (!item || !item.stock) return item;\n\n            if (item.stock_id === stock_id) {\n              const oldValue = item.quantity * (item.stock.current_price || 0);\n              const newValue = item.quantity * price;\n              const updatedStock = { ...item.stock, current_price: price };\n\n              return {\n                ...item,\n                stock: updatedStock,\n                valueChange: oldValue < newValue ? 'up' : 'down'\n              };\n            }\n            return item;\n          });\n\n          // Recalculate stock value with null safety\n          const newStockValue = updatedItems.reduce(\n            (total, item) => {\n              if (!item || !item.stock) return total;\n              return total + (item.quantity * (item.stock.current_price || 0));\n            },\n            0\n          );\n\n          return {\n            ...portfolio,\n            portfolio_items: updatedItems,\n            stock_value: newStockValue,\n            total_value: (portfolio.cash_balance || 0) + newStockValue\n          };\n        });\n\n        // Update top stocks if affected\n        setTopStocks(prevTopStocks => {\n          if (!prevTopStocks || !Array.isArray(prevTopStocks)) {\n            return prevTopStocks || [];\n          }\n\n          return prevTopStocks.map(stock => {\n            if (!stock) return stock;\n\n            if (stock.id === stock_id) {\n              return {\n                ...stock,\n                current_price: price,\n                priceChange: (stock.current_price || 0) < price ? 'up' : 'down'\n              };\n            }\n            return stock;\n          });\n        });\n      }\n    });\n\n    // Clean up on unmount\n    return () => {\n      removeListener();\n      closeWebSocket();\n    };\n  }, []);\n\n  if (loading) {\n    return <div className=\"loading\">Loading dashboard...</div>;\n  }\n\n  if (error) {\n    return <div className=\"error\">{error}</div>;\n  }\n\n  return (\n    <div className=\"dashboard-page\">\n      <Navigation />\n      <div className=\"dashboard-container\">\n        <div className=\"dashboard-header\">\n          <h1>Dashboard</h1>\n          <div className=\"portfolio-value\">\n            <h2>Total Portfolio Value</h2>\n            <div className=\"value\">${(portfolio?.total_value || 0).toFixed(2)}</div>\n            <div className=\"portfolio-breakdown\">\n              <div className=\"breakdown-item\">\n                <span>Cash:</span>\n                <span>${(portfolio?.cash_balance || 0).toFixed(2)}</span>\n              </div>\n              <div className=\"breakdown-item\">\n                <span>Stocks:</span>\n                <span>${(portfolio?.stock_value || 0).toFixed(2)}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"dashboard-content\">\n          <div className=\"dashboard-section\">\n            <div className=\"section-header\">\n              <h2>Your Portfolio</h2>\n              <Link to=\"/portfolio\" className=\"view-all\">View All</Link>\n            </div>\n            \n            {portfolio?.portfolio_items && portfolio.portfolio_items.length > 0 ? (\n              <div className=\"portfolio-list\">\n                <table className=\"dashboard-table\">\n                  <thead>\n                    <tr>\n                      <th>Symbol</th>\n                      <th>Shares</th>\n                      <th>Price</th>\n                      <th>Value</th>\n                      <th>Action</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {portfolio.portfolio_items?.slice(0, 3).map(item => item && item.stock ? (\n                      <tr\n                        key={item.stock_id}\n                        className={item.valueChange ? `value-${item.valueChange}` : ''}\n                      >\n                        <td>{item.stock.symbol}</td>\n                        <td>{item.quantity}</td>\n                        <td>${(item.stock.current_price || 0).toFixed(2)}</td>\n                        <td>${(item.quantity * (item.stock.current_price || 0)).toFixed(2)}</td>\n                        <td>\n                          <Link to={`/stock/${item.stock_id}`} className=\"trade-button\">\n                            Trade\n                          </Link>\n                        </td>\n                      </tr>\n                    ) : null)}\n                  </tbody>\n                </table>\n              </div>\n            ) : (\n              <div className=\"empty-list\">\n                <p>You don't own any stocks yet.</p>\n                <Link to=\"/stocks\" className=\"action-button\">Start Trading</Link>\n              </div>\n            )}\n          </div>\n          \n          <div className=\"dashboard-section\">\n            <div className=\"section-header\">\n              <h2>Top Stocks</h2>\n              <Link to=\"/stocks\" className=\"view-all\">View All</Link>\n            </div>\n            \n            <div className=\"top-stocks-list\">\n              <table className=\"dashboard-table\">\n                <thead>\n                  <tr>\n                    <th>Symbol</th>\n                    <th>Name</th>\n                    <th>Price</th>\n                    <th>Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {topStocks && topStocks.length > 0 ? topStocks.map(stock => stock ? (\n                    <tr\n                      key={stock.id}\n                      className={stock.priceChange ? `price-${stock.priceChange}` : ''}\n                    >\n                      <td>{stock.symbol}</td>\n                      <td>{stock.name}</td>\n                      <td>${(stock.current_price || 0).toFixed(2)}</td>\n                      <td>\n                        <Link to={`/stock/${stock.id}`} className=\"trade-button\">\n                          Trade\n                        </Link>\n                      </td>\n                    </tr>\n                  ) : null) : (\n                    <tr>\n                      <td colSpan=\"4\" className=\"empty-message\">No stocks available</td>\n                    </tr>\n                  )}\n                </tbody>\n              </table>\n            </div>\n          </div>\n          \n          <div className=\"dashboard-section\">\n            <div className=\"section-header\">\n              <h2>Recent Transactions</h2>\n              <Link to=\"/transactions\" className=\"view-all\">View All</Link>\n            </div>\n            \n            <div className=\"transactions-list\">\n              <table className=\"dashboard-table\">\n                <thead>\n                  <tr>\n                    <th>Date</th>\n                    <th>Stock</th>\n                    <th>Type</th>\n                    <th>Quantity</th>\n                    <th>Price</th>\n                    <th>Total</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {transactions && transactions.length > 0 ? transactions.map(transaction => transaction && transaction.stock ? (\n                    <tr key={transaction.id}>\n                      <td>{new Date(transaction.created_at).toLocaleDateString()}</td>\n                      <td>{transaction.stock.symbol}</td>\n                      <td className={`transaction-type ${transaction.transaction_type}`}>\n                        {transaction.transaction_type}\n                      </td>\n                      <td>{transaction.quantity}</td>\n                      <td>${(transaction.price || 0).toFixed(2)}</td>\n                      <td>${(transaction.quantity * (transaction.price || 0)).toFixed(2)}</td>\n                    </tr>\n                  ) : null) : (\n                    <tr>\n                      <td colSpan=\"6\" className=\"empty-message\">No recent transactions.</td>\n                    </tr>\n                  )}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Chat Component */}\n      <Chat />\n    </div>\n  );\n};\n\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}