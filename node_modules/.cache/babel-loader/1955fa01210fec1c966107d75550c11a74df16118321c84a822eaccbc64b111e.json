{"ast":null,"code":"// Chat service for frontend\nimport{getToken}from'./auth';// Make sure to include the correct API path\nconst BASE_URL=process.env.REACT_APP_API_URL||'https://web-production-1e26.up.railway.app';const API_URL=`${BASE_URL}/api`;// Get recent chat messages\nexport const getRecentMessages=async function(){let limit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:50;try{const token=getToken();const response=await fetch(`${API_URL}/chat/messages?limit=${limit}`,{method:'GET',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`}});if(!response.ok){throw new Error('Failed to fetch chat messages');}return await response.json();}catch(error){console.error('Error fetching chat messages:',error);throw error;}};// Send a chat message\nexport const sendChatMessage=async message=>{try{const token=getToken();const response=await fetch(`${API_URL}/chat/send`,{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},body:JSON.stringify({message})});if(!response.ok){throw new Error('Failed to send chat message');}return await response.json();}catch(error){console.error('Error sending chat message:',error);throw error;}};","map":{"version":3,"names":["getToken","BASE_URL","process","env","REACT_APP_API_URL","API_URL","getRecentMessages","limit","arguments","length","undefined","token","response","fetch","method","headers","ok","Error","json","error","console","sendChatMessage","message","body","JSON","stringify"],"sources":["/home/kdln/code/officestonks/frontend/src/services/chat.js"],"sourcesContent":["// Chat service for frontend\nimport { getToken } from './auth';\n\n// Make sure to include the correct API path\nconst BASE_URL = process.env.REACT_APP_API_URL || 'https://web-production-1e26.up.railway.app';\nconst API_URL = `${BASE_URL}/api`;\n\n// Get recent chat messages\nexport const getRecentMessages = async (limit = 50) => {\n  try {\n    const token = getToken();\n    \n    const response = await fetch(`${API_URL}/chat/messages?limit=${limit}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to fetch chat messages');\n    }\n\n    return await response.json();\n  } catch (error) {\n    console.error('Error fetching chat messages:', error);\n    throw error;\n  }\n};\n\n// Send a chat message\nexport const sendChatMessage = async (message) => {\n  try {\n    const token = getToken();\n    \n    const response = await fetch(`${API_URL}/chat/send`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      },\n      body: JSON.stringify({\n        message,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to send chat message');\n    }\n\n    return await response.json();\n  } catch (error) {\n    console.error('Error sending chat message:', error);\n    throw error;\n  }\n};"],"mappings":"AAAA;AACA,OAASA,QAAQ,KAAQ,QAAQ,CAEjC;AACA,KAAM,CAAAC,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,4CAA4C,CAC9F,KAAM,CAAAC,OAAO,CAAG,GAAGJ,QAAQ,MAAM,CAEjC;AACA,MAAO,MAAM,CAAAK,iBAAiB,CAAG,cAAAA,CAAA,CAAsB,IAAf,CAAAC,KAAK,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,EAAE,CAChD,GAAI,CACF,KAAM,CAAAG,KAAK,CAAGX,QAAQ,CAAC,CAAC,CAExB,KAAM,CAAAY,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGR,OAAO,wBAAwBE,KAAK,EAAE,CAAE,CACtEO,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,CAAE,UAAUJ,KAAK,EAClC,CACF,CAAC,CAAC,CAEF,GAAI,CAACC,QAAQ,CAACI,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,+BAA+B,CAAC,CAClD,CAEA,MAAO,MAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CAC9B,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACrD,KAAM,CAAAA,KAAK,CACb,CACF,CAAC,CAED;AACA,MAAO,MAAM,CAAAE,eAAe,CAAG,KAAO,CAAAC,OAAO,EAAK,CAChD,GAAI,CACF,KAAM,CAAAX,KAAK,CAAGX,QAAQ,CAAC,CAAC,CAExB,KAAM,CAAAY,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGR,OAAO,YAAY,CAAE,CACnDS,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,CAAE,UAAUJ,KAAK,EAClC,CAAC,CACDY,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBH,OACF,CAAC,CACH,CAAC,CAAC,CAEF,GAAI,CAACV,QAAQ,CAACI,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,6BAA6B,CAAC,CAChD,CAEA,MAAO,MAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CAC9B,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnD,KAAM,CAAAA,KAAK,CACb,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}